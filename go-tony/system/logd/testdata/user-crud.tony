# User CRUD operations example
# Usage: cat user-crud.tony | o system logd client localhost:9123

# Handshake
{hello: {clientId: "user-crud-example"}}

# Create user alice
{patch: {patch: {path: "users.alice", data: {name: "Alice Smith", email: "alice@example.com", role: "admin"}}}}

# Create user bob
{patch: {patch: {path: "users.bob", data: {name: "Bob Jones", email: "bob@example.com", role: "user"}}}}

# Read all users
{match: {body: {path: "users"}}}

# Update alice's role
{patch: {patch: {path: "users.alice.role", data: "superadmin"}}}

# Read alice
{match: {body: {path: "users.alice"}}}

# Delete bob's email (set to null via !delete)
{patch: {patch: {path: "users.bob.email", data: !delete null}}}

# Final state
{match: {body: {path: "users"}}}
