# Configuration management example
# Usage: cat config.tony | o system logd client localhost:9123

# Handshake
{hello: {clientId: "config-example"}}

# Set initial config
{patch: {path: "config", data: {app: {name: "myapp", version: "1.0.0", debug: false}, database: {host: "localhost", port: 5432, pool_size: 10}, features: {new_ui: false, analytics: true}}}}

# Read current config
{match: {body: {path: "config"}}}

# Enable debug mode
{patch: {path: "config.app.debug", data: true}}

# Update database pool size
{patch: {path: "config.database.pool_size", data: 20}}

# Enable new feature flag
{patch: {path: "config.features.new_ui", data: true}}

# Read just features
{match: {body: {path: "config.features"}}}

# Merge in new settings without overwriting existing
{patch: {path: "config.app", data: {build: "abc123"}}}

# Final config state
{match: {body: {path: "config"}}}
