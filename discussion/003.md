<!-- Comment 003 - 2025-12-20T11:05:50+01:00 -->

## Project structure and key packages

### Core packages (go-tony module)
- `ir/` - Intermediate representation, core type: `ir.Node`
- `ir/kpath/` - Kinded path parsing: `.field`, `[index]`, `{sparse}`
- `stream/` - Event-based encoding/decoding
- `tony/` - Patch application (`tony.Patch`)
- `mergeop/` - Merge operations (`!delete`, `!insert`, `!replace`, etc.)
- `schema/` - Tony schema definitions
- `parse/` - Parse Tony text into IR

### Tools
- `cmd/o` - Primary CLI for Tony format
- `cmd/tony-codegen` - Code generator from Tony schemas
- `cmd/tony-lsp` - Language server
- `cmd/git-issue` - Git-native issue tracker (this tool)

### Important conventions
- Object fields are always in alphabetical order after patching
- Streaming over full documents - prefer event streaming
- Kinded paths are fundamental: `foo.bar[0]` vs `data{3002}.settings`
- Generated files: `*_gen.go` suffix, schemas in `schema_gen.tony`

### Documentation
- Bible: `docs/tony.md`
- IR reference: `docs/ir.md`
- API vision: `docs/tonyapi.md`
- Storage docs: `system/logd/storage/docs/`
