<!-- Comment 003 - 2025-12-26T18:26:46+01:00 -->

## Implementation Progress (2024-12-26)

### Done: Schema in Hello Response

Added `schema` field to `HelloResponse` - returns the server's Tony schema document on connect.

**Files changed:**
- `api/session.go`: Added `Schema *ir.Node` to `HelloResponse`
- `server/session.go`: Pass schema through to hello response
- `server/tcp.go`: Wire schema from server config

**Current behavior:**
- **Baseline sessions** (scope=nil): Receive schema in hello response
- **Scoped sessions**: Receive nil schema (not yet supported)

### TODO: Per-Scope Schema

Scoped sessions currently don't receive a schema. Before enabling:

1. Design scope schema overlay model (baseline + scope overrides)
2. Track baseline schema version at scope creation
3. Handle stale scope detection when baseline schema changes
4. Consider schema set operations for scopes

See `TODO(#87)` comment in `server/session.go:handleHello`.

