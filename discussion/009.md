<!-- Comment 009 - 2025-12-20T11:22:59+01:00 -->

## Worktree Workflow for Issues

### Directory structure
```
tony-format/
├── go-tony/              # Main worktree (scott's working copy)
└── .worktrees/
    ├── issue-013/        # Streaming patch processor work
    └── issue-NNN/        # Other issue worktrees
```

The main worktree at `go-tony/` is scott's working copy. Claude works in `.worktrees/issue-NNN/` to avoid conflicts.

### When to use a worktree
- Any work that touches multiple files or takes multiple turns
- Prevents conflicts with scott's parallel edits in main worktree
- Enables clean git history with issue-specific branches

### Creating a worktree for an issue

```bash
# From go-tony/, create new worktree for issue NNN
git worktree add ../.worktrees/issue-NNN -b issue-NNN

# Navigate to it
cd ../.worktrees/issue-NNN
```

### Working in the worktree
- All edits happen in the worktree directory
- Commit regularly with issue reference: `fix: description (#NNN)`
- The main worktree stays clean for scott's work

### Completing work

```bash
# From the worktree, push branch
git push -u origin issue-NNN

# Option A: Create PR (preferred for review)
gh pr create --title "Issue #NNN: description" --body "Closes #NNN"

# Option B: Merge directly (for small/obvious changes)
cd ../go-tony
git merge issue-NNN
git push
```

### Cleanup

```bash
# After merge, remove worktree
git worktree remove ../.worktrees/issue-NNN

# Delete branch if no longer needed
git branch -d issue-NNN
```

### Checking worktree status
```bash
git worktree list        # Show all worktrees
git branch -vv           # Show branches and tracking
```
