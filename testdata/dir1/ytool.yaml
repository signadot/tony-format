
ytool:
  tag: '!ytool'
  sources:
    #- exec: kustomize build ../../../../sandboxes/deploy/operator/overlays/production
    - dir: source
    #- url: https://raw.githubusercontent.com/signadot/hotrod/refs/heads/main/k8s/base/driver.yaml
    #destDir: out
  patches:
  - match:
      it: null
    patch:
      it: !json-patch
      - op: remove
        path: /2
  - match:
      list: null
    patch: !json-patch
    - op: remove
      path: /list/0
  - match: !glob 'h*o'
    patch: !nullify null

  - match:
      pipe: null
    patch:
      pipe: !pipe |
        sed -e s/staging/prod/
  - match: !all
      attr: b1
    patch:
      !all
      b1: true

  - match: !all
      b1: null
    patch: !if
      if:
        attr: a1
      then:
        b1: YOYO
      else:
        !pass null
  - match:
      list3: null
    patch:
      list3: !key(name)
      - name: a
        env: !key(name)
        - name: fred
          value: WILMA
  - match:
      quote: null
    patch:
      quote: !quote.pass null
  - match:
      unquote: null
    patch: 
      unquote: 
        !unquote.pass
        null
  - match:
      subtree: !subtree.type ""
    patch: !dive
    - match: !type 0
      patch: 42

  env:
    controlPlane:
      controlAPI: https://api.staging.signadot.com
    dyn: !eval
      value: !exec ./nonce.sh

